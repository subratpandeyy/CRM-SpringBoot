{
  "tech_stack": [
    "Java 17",
    "Spring Boot 3.2",
    "React 18 (Vite) frontend on port 3000",
    "PostgreSQL database",
    "JWT-based authentication",
    "RESTful JSON APIs"
  ],
  "features": [
    {
      "name": "Authentication API",
      "description": "Login, registration, and debug endpoints for tenant members and organizations.",
      "files": [
        "src/main/java/com/crm/controller/AuthController.java"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Authentication API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/auth/login": {
            "post": {
              "summary": "Authenticate user and return JWT token",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/LoginRequest"
                    }
                  }
                }
              },
              "responses": {
                "200": {
                  "description": "Successful authentication",
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/JwtResponse"
                      }
                    }
                  }
                },
                "400": {
                  "description": "Validation or authentication error"
                }
              }
            }
          },
          "/api/auth/debug": {
            "get": {
              "summary": "Debug database state (counts of users, organizations, roles)",
              "responses": {
                "200": {
                  "description": "Debug information returned as text"
                }
              }
            }
          },
          "/api/auth/register": {
            "post": {
              "summary": "Register a new organization and admin member",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/OrganizationRegistrationRequest"
                    }
                  }
                }
              },
              "responses": {
                "200": {
                  "description": "Organization and admin user created"
                },
                "400": {
                  "description": "Error creating organization or admin"
                }
              }
            }
          }
        },
        "components": {
          "schemas": {
            "LoginRequest": {
              "type": "object",
              "properties": {
                "email": { "type": "string", "format": "email" },
                "password": { "type": "string", "format": "password" }
              },
              "required": ["email", "password"]
            },
            "JwtResponse": {
              "type": "object",
              "properties": {
                "token": { "type": "string" },
                "memberId": { "type": "integer", "format": "int64" },
                "name": { "type": "string" },
                "orgId": { "type": "integer", "format": "int64" },
                "role": { "type": "string" }
              }
            },
            "OrganizationRegistrationRequest": {
              "type": "object",
              "properties": {
                "orgName": { "type": "string" },
                "orgEmail": { "type": "string", "format": "email" },
                "adminName": { "type": "string" },
                "adminEmail": { "type": "string", "format": "email" },
                "adminPassword": { "type": "string", "format": "password" }
              },
              "required": ["orgName", "orgEmail", "adminName", "adminEmail", "adminPassword"]
            }
          }
        }
      }
    },
    {
      "name": "Lead Management API",
      "description": "CRUD operations and status updates for sales leads scoped to an organization and member.",
      "files": [
        "src/main/java/com/crm/controller/LeadController.java"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Lead Management API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/leads": {
            "post": {
              "summary": "Create a lead for the authenticated organization/member",
              "responses": {
                "200": { "description": "Lead created" },
                "400": { "description": "Error creating lead" }
              }
            },
            "get": {
              "summary": "List leads for the authenticated organization",
              "responses": {
                "200": { "description": "List of leads" }
              }
            }
          },
          "/api/leads/{leadId}": {
            "get": {
              "summary": "Get a lead by ID",
              "responses": {
                "200": { "description": "Lead details" },
                "400": { "description": "Error" }
              }
            },
            "put": {
              "summary": "Update a lead by ID",
              "responses": {
                "200": { "description": "Lead updated" },
                "400": { "description": "Error" }
              }
            },
            "delete": {
              "summary": "Delete a lead by ID",
              "responses": {
                "200": { "description": "Lead deleted" },
                "400": { "description": "Error" }
              }
            }
          },
          "/api/leads/{leadId}/status": {
            "put": {
              "summary": "Update verification status of a lead",
              "parameters": [
                {
                  "name": "isVerified",
                  "in": "query",
                  "required": true,
                  "schema": { "type": "boolean" }
                }
              ],
              "responses": {
                "200": { "description": "Lead status updated" },
                "400": { "description": "Error" }
              }
            }
          }
        }
      }
    },
    {
      "name": "Deal Management API",
      "description": "Create, list, update, delete deals plus summary and stage distribution for dashboards.",
      "files": [
        "src/main/java/com/crm/controller/DealController.java"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Deal Management API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/deals": {
            "post": {
              "summary": "Create a deal for the authenticated organization/member",
              "responses": {
                "200": { "description": "Deal created" },
                "400": { "description": "Error" }
              }
            },
            "get": {
              "summary": "List deals for the authenticated organization",
              "responses": {
                "200": { "description": "List of deals" }
              }
            }
          },
          "/api/deals/summary": {
            "get": {
              "summary": "Get monthly deal summary",
              "responses": {
                "200": { "description": "Summary data" }
              }
            }
          },
          "/api/deals/stages": {
            "get": {
              "summary": "Get deal stage distribution",
              "responses": {
                "200": { "description": "Stage distribution data" }
              }
            }
          },
          "/api/deals/{dealId}": {
            "get": {
              "summary": "Get a deal by ID",
              "responses": {
                "200": { "description": "Deal details" }
              }
            },
            "put": {
              "summary": "Update a deal by ID",
              "responses": {
                "200": { "description": "Deal updated" },
                "400": { "description": "Error" }
              }
            },
            "delete": {
              "summary": "Delete a deal by ID",
              "responses": {
                "200": { "description": "Deal deleted" },
                "400": { "description": "Error" }
              }
            }
          }
        }
      }
    },
    {
      "name": "Account Management API",
      "description": "CRUD operations for customer accounts, scoped by organization and member.",
      "files": [
        "src/main/java/com/crm/controller/AccountController.java"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Account Management API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/accounts": {
            "post": {
              "summary": "Create an account",
              "responses": {
                "200": { "description": "Account created" },
                "400": { "description": "Error" }
              }
            },
            "get": {
              "summary": "List accounts for authenticated organization",
              "responses": {
                "200": { "description": "List of accounts" }
              }
            }
          },
          "/api/accounts/{accountId}": {
            "get": {
              "summary": "Get account by ID",
              "responses": {
                "200": { "description": "Account details" }
              }
            },
            "put": {
              "summary": "Update account by ID",
              "responses": {
                "200": { "description": "Account updated" },
                "400": { "description": "Error" }
              }
            },
            "delete": {
              "summary": "Delete account by ID",
              "responses": {
                "200": { "description": "Account deleted" },
                "400": { "description": "Error" }
              }
            }
          }
        }
      }
    },
    {
      "name": "Contact Management API",
      "description": "CRUD operations for contacts associated with accounts and organizations.",
      "files": [
        "src/main/java/com/crm/controller/ContactController.java"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Contact Management API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/contacts": {
            "post": {
              "summary": "Create a contact",
              "responses": {
                "200": { "description": "Contact created" }
              }
            },
            "get": {
              "summary": "List contacts for authenticated organization",
              "responses": {
                "200": { "description": "List of contacts" }
              }
            }
          },
          "/api/contacts/{contactId}": {
            "get": {
              "summary": "Get contact by ID",
              "responses": {
                "200": { "description": "Contact details" }
              }
            },
            "put": {
              "summary": "Update contact by ID",
              "responses": {
                "200": { "description": "Contact updated" },
                "400": { "description": "Error" }
              }
            },
            "delete": {
              "summary": "Delete contact by ID",
              "responses": {
                "200": { "description": "Contact deleted" },
                "400": { "description": "Error" }
              }
            }
          }
        }
      }
    },
    {
      "name": "Organization Management API",
      "description": "CRUD operations for tenant organizations.",
      "files": [
        "src/main/java/com/crm/controller/OrganizationController.java"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Organization Management API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/organizations": {
            "post": {
              "summary": "Create organization",
              "responses": {
                "200": { "description": "Organization created" },
                "400": { "description": "Error" }
              }
            },
            "get": {
              "summary": "List organizations",
              "responses": {
                "200": { "description": "List of organizations" }
              }
            }
          },
          "/api/organizations/{orgId}": {
            "get": {
              "summary": "Get organization by ID",
              "responses": {
                "200": { "description": "Organization details" }
              }
            },
            "put": {
              "summary": "Update organization by ID",
              "responses": {
                "200": { "description": "Organization updated" },
                "400": { "description": "Error" }
              }
            },
            "delete": {
              "summary": "Delete organization by ID",
              "responses": {
                "200": { "description": "Organization deleted" },
                "400": { "description": "Error" }
              }
            }
          }
        }
      }
    },
    {
      "name": "Member Management API",
      "description": "CRUD operations for members (users) within an organization.",
      "files": [
        "src/main/java/com/crm/controller/MemberController.java"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Member Management API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/members": {
            "post": {
              "summary": "Create member",
              "responses": {
                "200": { "description": "Member created" }
              }
            },
            "get": {
              "summary": "List members",
              "responses": {
                "200": { "description": "List of members" }
              }
            }
          },
          "/api/members/{memberId}": {
            "get": {
              "summary": "Get member by ID",
              "responses": {
                "200": { "description": "Member details" }
              }
            },
            "put": {
              "summary": "Update member by ID",
              "responses": {
                "200": { "description": "Member updated" },
                "400": { "description": "Error" }
              }
            },
            "delete": {
              "summary": "Delete member by ID",
              "responses": {
                "200": { "description": "Member deleted" },
                "400": { "description": "Error" }
              }
            }
          }
        }
      }
    },
    {
      "name": "Activity Management API",
      "description": "Track activities (tasks, interactions) tied to members and organizations.",
      "files": [
        "src/main/java/com/crm/controller/ActivityController.java"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Activity Management API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/activities": {
            "post": {
              "summary": "Create activity",
              "responses": {
                "201": { "description": "Activity created" },
                "400": { "description": "Error" }
              }
            },
            "get": {
              "summary": "List activities for authenticated organization",
              "responses": {
                "200": { "description": "List of activities" }
              }
            }
          },
          "/api/activities/{activityId}": {
            "get": {
              "summary": "Get activity by ID",
              "responses": {
                "200": { "description": "Activity details" }
              }
            },
            "put": {
              "summary": "Update activity by ID",
              "responses": {
                "200": { "description": "Activity updated" },
                "400": { "description": "Error" }
              }
            },
            "delete": {
              "summary": "Delete activity by ID",
              "responses": {
                "200": { "description": "Activity deleted" },
                "400": { "description": "Error" }
              }
            }
          }
        }
      }
    },
    {
      "name": "Role Management API",
      "description": "Fetch available roles for access control.",
      "files": [
        "src/main/java/com/crm/controller/RoleController.java"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Role Management API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/roles": {
            "get": {
              "summary": "List all roles",
              "responses": {
                "200": { "description": "List of roles" },
                "400": { "description": "Error" }
              }
            }
          }
        }
      }
    }
  ]
}
